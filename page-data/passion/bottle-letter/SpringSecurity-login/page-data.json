{"componentChunkName":"component---src-templates-blog-template-js","path":"/passion/bottle-letter/SpringSecurity-login/","result":{"data":{"cur":{"id":"0a6c5c0a-bfc2-56f7-9388-43b7f1af40a2","html":"<blockquote>\n<p><a href=\"https://github.com/HoYunBros/bottle-letter-be\">Bottle-letter</a> í”„ë¡œì íŠ¸ ê¸°ë¡</p>\n</blockquote>\n<p>Spring Securityë¥¼ ì‚¬ìš©í•´ ë¡œê·¸ì¸ì„ êµ¬í˜„í•˜ë©° Filterë¥¼ ì´ìš©í•œ ë°©ì‹ê³¼ Argument Resolverë¥¼ ì´ìš©í•œ ë°©ì‹ì„ ì•Œì•„ë´¤ë‹¤.</p>\n<h3 id=\"filterë¥¼-ì´ìš©í•œ-ë¡œê·¸ì¸\" style=\"position:relative;\"><a href=\"#filter%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8\" aria-label=\"filterë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Filterë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸</h3>\n<p>ë¨¼ì €\bSpring Securityì˜ ë™ì‘ ì›ë¦¬ì™€ êµ¬ì¡°ë¥¼ ì´í•´í•´ë³´ì.\n<a href=\"https://spring.io/guides/topicals/spring-security-architecture/\">https://spring.io/guides/topicals/spring-security-architecture/</a> ê³µì‹ ë ˆí¼ëŸ°ìŠ¤ì— ì˜ ì •ë¦¬ê°€ ë˜ì–´ ìˆì§€ë§Œ ê°„ë‹¨íˆ ì„¤ëª…ì„ í•´ë³´ì.</p>\n<ul>\n<li>ìš”ì²­ì´ ì˜¤ë©´ Spring Securityì˜ FilterChainì´ ê°€ë¡œì±ˆë‹¤.</li>\n<li>Authentication ê°ì²´ë¥¼ ìƒì„±í•´ì„œ security contextì— ì €ì¥í•˜ëŠ”ë°, ì´ ê³¼ì •ì„ ê°„ëµíˆ ìš”ì•½í•˜ìë©´\n<ul>\n<li>UsernamePasswordAuthenticationFilter ì•ì— ì»¤ìŠ¤í…€í•œ JwtFilterë¥¼ ìƒì„±í•œë‹¤.</li>\n<li>ì»¤ìŠ¤í…€ í•„í„°ì—ì„œëŠ” í—¤ë”ì˜ jwt Tokenì„ íŒŒì‹±í•˜ì—¬ ë¶„ì„í•˜ê³  ì¸ì¦í•œë‹¤.</li>\n<li>Securityì—ì„œ ì œê³µí•˜ëŠ” <code class=\"language-text\">UserDetail, UserDetailService</code> ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.</li>\n<li>ì¸ì¦ëœ ìœ ì €ëŠ” Authentication ê°ì²´ë¡œ Security Contextì— ì €ì¥ëœë‹¤.</li>\n</ul>\n</li>\n</ul>\n<p>ìœ„ ë‚´ìš© ë§ê³ ë„, Securityê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì€ ë„ˆë¬´ ë§ì§€ë§Œ ë‚˜ëŠ” ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì¸ì¦ì„ êµ¬í˜„í–ˆë‹¤.</p>\n<p>ì¥ì </p>\n<ul>\n<li>ëª¨ë“  APIì— ëŒ€í•´ ê³µí†µ ì¸ì¦ì„ í•  ìˆ˜ ìˆë‹¤</li>\n<li>ëŒ€ê·œëª¨ í™˜ê²½ì—ì„œ ì¸ì¦ ë¡œì§ì„ ì¼ê´„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤</li>\n</ul>\n<p>ë‹¨ì </p>\n<ul>\n<li>êµ¬í˜„ ì½”ë“œì˜ ì–‘ì´ ë§ë‹¤</li>\n<li>ë³µì¡í•œ ì‘ë™ ë°©ì‹ì„ ì´í•´í•´ì•¼ í•œë‹¤ -> ì¸ì¦ êµ¬í˜„ê³¼ í…ŒìŠ¤íŠ¸ ì‘ì„±ì— ì–´ë ¤ì›€ì´ ìˆë‹¤</li>\n</ul>\n<p>ì •ë„ë¡œ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Component</span>  \n<span class=\"token keyword\">class</span> <span class=\"token function\">JwtFilter</span><span class=\"token punctuation\">(</span>  \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> jwtUtils<span class=\"token operator\">:</span> JwtUtils  \n<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">OncePerRequestFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n  \n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">doFilterInternal</span><span class=\"token punctuation\">(</span>  \n        request<span class=\"token operator\">:</span> HttpServletRequest<span class=\"token punctuation\">,</span>  \n        response<span class=\"token operator\">:</span> HttpServletResponse<span class=\"token punctuation\">,</span>  \n        filterChain<span class=\"token operator\">:</span> FilterChain  \n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n        <span class=\"token keyword\">val</span> authorizationHeader<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getHeader</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Authorization\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?:</span> <span class=\"token keyword\">return</span> filterChain<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>  \n            request<span class=\"token punctuation\">,</span>  \n            response  \n        <span class=\"token punctuation\">)</span>  \n  \n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>authorizationHeader<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Bearer \"</span></span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n            <span class=\"token keyword\">return</span> filterChain<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span>  \n        <span class=\"token punctuation\">}</span>        <span class=\"token keyword\">val</span> token <span class=\"token operator\">=</span> authorizationHeader<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Bearer \"</span></span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>  \n  \n        <span class=\"token comment\">// validate token  </span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jwtUtils<span class=\"token punctuation\">.</span><span class=\"token function\">validation</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n            <span class=\"token keyword\">val</span> username <span class=\"token operator\">=</span> jwtUtils<span class=\"token punctuation\">.</span><span class=\"token function\">parseUsername</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span>  \n            <span class=\"token keyword\">val</span> authentication<span class=\"token operator\">:</span> Authentication <span class=\"token operator\">=</span> jwtUtils<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthentication</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span>  \n  \n            SecurityContextHolder<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>authentication <span class=\"token operator\">=</span> authentication  \n        <span class=\"token punctuation\">}</span>  \n  \n        filterChain<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span>  \n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ì™¸ì—ë„ JwtFilter, UserDetail, UserService ë“± êµ¬í˜„í•´ì•¼ í• ê²Œ ë§ë‹¤.</span></code></pre></div>\n<h3 id=\"argument-resolverë¥¼-ì´ìš©í•œ-ë¡œê·¸ì¸\" style=\"position:relative;\"><a href=\"#argument-resolver%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8\" aria-label=\"argument resolverë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Argument Resolverë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸</h3>\n<p><code class=\"language-text\">ArgumentResolver</code>ëŠ” ì–´ë– í•œ ìš”ì²­ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë“¤ì–´ì™”ì„ ë•Œ, ìš”ì²­ì— ë“¤ì–´ì˜¨ ê°’ìœ¼ë¡œë¶€í„° ì›í•˜ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ì¼ì„Â  ê°„ì ‘ì ìœ¼ë¡œ í•´ì¤„ ìˆ˜ ìˆë‹¤.</p>\n<p>ê²°ê³¼ë¥¼ ë¨¼ì € ë³´ìë©´</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"/me\"</span></span><span class=\"token punctuation\">)</span>  \n<span class=\"token keyword\">fun</span> <span class=\"token function\">getMe</span><span class=\"token punctuation\">(</span>  \n    <span class=\"token annotation builtin\">@LoginUser</span> user<span class=\"token operator\">:</span> User  \n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ResponseEntity<span class=\"token operator\">&lt;</span>ApiResponse<span class=\"token operator\">&lt;</span>UserResponse<span class=\"token operator\">></span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token keyword\">val</span> response <span class=\"token operator\">=</span> userService<span class=\"token punctuation\">.</span><span class=\"token function\">getMe</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>  \n    <span class=\"token keyword\">return</span> ResponseEntity<span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>ApiResponse<span class=\"token punctuation\">.</span><span class=\"token function\">success</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">@LoginUser</code>ëŠ” ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜ì´ë‹¤. ì´ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ íŒŒë¼ë¯¸í„°ê°€ ì–´ë–»ê²Œ ì²˜ë¦¬ë ê¹Œ?</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Component</span>  \n<span class=\"token keyword\">class</span> <span class=\"token function\">LoginUserResolver</span><span class=\"token punctuation\">(</span>  \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> jwtTokenProvider<span class=\"token operator\">:</span> JwtTokenProvider<span class=\"token punctuation\">,</span>  \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> userService<span class=\"token operator\">:</span> UserService  \n<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> HandlerMethodArgumentResolver <span class=\"token punctuation\">{</span>  \n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">supportsParameter</span><span class=\"token punctuation\">(</span>parameter<span class=\"token operator\">:</span> MethodParameter<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Boolean <span class=\"token punctuation\">{</span>  \n        <span class=\"token keyword\">return</span> parameter<span class=\"token punctuation\">.</span><span class=\"token function\">hasParameterAnnotation</span><span class=\"token punctuation\">(</span>LoginUser<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>  \n    <span class=\"token punctuation\">}</span>  \n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">resolveArgument</span><span class=\"token punctuation\">(</span>  \n        parameter<span class=\"token operator\">:</span> MethodParameter<span class=\"token punctuation\">,</span>  \n        mavContainer<span class=\"token operator\">:</span> ModelAndViewContainer<span class=\"token operator\">?</span><span class=\"token punctuation\">,</span>  \n        webRequest<span class=\"token operator\">:</span> NativeWebRequest<span class=\"token punctuation\">,</span>  \n        binderFactory<span class=\"token operator\">:</span> WebDataBinderFactory<span class=\"token operator\">?</span>  \n    <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> User <span class=\"token punctuation\">{</span>  \n        <span class=\"token comment\">// ... jwt í† í° ê²€ì¦ </span>\n    <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">HandlerMethodArgumentResolver</code>ë¥¼ í™•ì¥í–ˆê³ , ì´ë¥¼ ìœ„í•´ ë‘ê°œì˜ í•¨ìˆ˜ë¥¼ overrideí–ˆë‹¤.\n<code class=\"language-text\">supportsParameter</code>ëŠ” í•´ë‹¹ íŒŒë¼ë¯¸í„°ê°€ @LoginUser ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.\nì´ ê°’ì´ trueë¼ë©´, <code class=\"language-text\">resolveArguement</code>ê°€ ì‹¤í–‰ë˜ê³ , ì´ ê³¼ì •ì—ì„œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” jwt ì¸ì¦ì„ í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ìš°ë¦¬ê°€ í‰ì†Œ Controller ê³„ì¸µì—ì„œ HttpRequest, @RequestParam, @RequestBody ë“± ì—¬ëŸ¬ê°€ì§€ íƒ€ì…ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì´ë•Œë¬¸ì´ë‹¤.</p>\n<p>ì¥ì </p>\n<ul>\n<li>ì½”ë“œê°€ ê°„ê²°í•´ì§„ë‹¤</li>\n<li>jwt ë¡œì§ì„ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.</li>\n<li>êµ¬í˜„ì´ ìƒëŒ€ì ìœ¼ë¡œ ê°„í¸í•˜ë‹¤</li>\n</ul>\n<p>ë‹¨ì </p>\n<ul>\n<li>ì¸ì¦ì´ í•„ìš”í•œ ëª¨ë“  APIì— ëŒ€í•´ ì ìš©í•´ì•¼í•œë‹¤ -> ì¼ê´€ì„±ì´ ë–¨ì–´ì§„ë‹¤</li>\n<li>Spring Securityì˜ ì¼ë¶€ ê¸°ëŠ¥ë“¤ê³¼ í†µí•©ì´ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤.</li>\n</ul>","excerpt":"Bottle-letter í”„ë¡œì íŠ¸ ê¸°ë¡ Spring Securityë¥¼ ì‚¬ìš©í•´ ë¡œê·¸ì¸ì„ êµ¬í˜„í•˜ë©° Filterë¥¼ ì´ìš©í•œ ë°©ì‹ê³¼ Argument Resolverë¥¼ ì´ìš©í•œ ë°©ì‹ì„ ì•Œì•„ë´¤ë‹¤. Filterë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ ë¨¼ì €\bSpring Securityì˜ ë™ì‘ ì›ë¦¬ì™€ êµ¬ì¡°ë¥¼ ì´í•´í•´ë³´ì.\nhttps://spring.io/guides/topicals/spring-security-architecture/ ê³µì‹ ë ˆí¼ëŸ°ìŠ¤ì— ì˜ ì •ë¦¬ê°€ ë˜ì–´ ìˆì§€ë§Œ ê°„ë‹¨íˆ ì„¤ëª…ì„ í•´ë³´ì. ìš”ì²­ì´ ì˜¤ë©´ Spring Securityì˜ FilterChainì´ ê°€ë¡œì±ˆë‹¤. Authentication ê°ì²´ë¥¼ ìƒì„±í•´ì„œ security contextì— ì €ì¥í•˜ëŠ”ë°, ì´ ê³¼ì •ì„ ê°„ëµíˆ ìš”ì•½í•˜ìë©´ UsernamePasswordAuthenticationFilter ì•ì— ì»¤ìŠ¤í…€í•œ JwtFilterë¥¼ ìƒì„±í•œë‹¤. ì»¤ìŠ¤í…€ í•„í„°ì—ì„œëŠ” í—¤ë”ì˜ jwt Tokenì„ íŒŒì‹±í•˜ì—¬ ë¶„ì„í•˜ê³  ì¸ì¦í•œë‹¤. Securityì—ì„œ ì œê³µí•˜ëŠ”  ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤â€¦","frontmatter":{"date":"August 29, 2023","title":"Spring Security login êµ¬í˜„","categories":"Spring","author":"ì§€êµ¬ê¹œëƒ¥","emoji":"ğŸŒ±"},"fields":{"slug":"/passion/bottle-letter/SpringSecurity-login/"}},"next":{"id":"042cd6a4-789e-50ba-b214-f36bebd0cc43","html":"<blockquote>\n<p><a href=\"https://github.com/HoYunBros/bottle-letter-be\">Bottle-letter</a> í”„ë¡œì íŠ¸ ê¸°ë¡</p>\n</blockquote>\n<h3 id=\"spring-docs-ì ìš©\" style=\"position:relative;\"><a href=\"#spring-docs-%EC%A0%81%EC%9A%A9\" aria-label=\"spring docs ì ìš© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spring docs ì ìš©</h3>\n<p>Spring DocsëŠ” Swaggerì™€ ê°™ì´ API docsë¥¼ ìƒì„±í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.\n<strong>ë‹¤ë¥¸ì </strong>ì€ Spring docsëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ì‘ì„±ëœë‹¤.</p>\n<p>SwaggerëŠ” Controllerë¥¼ ìŠ¤ìº”í•˜ê³  ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ë©°, íƒ€ì´í‹€ê³¼ ê°™ì€ ì»¤ìŠ¤í…€ ì„¤ì •ì€ ì½”ë“œì— í•¨ê»˜ ê¸°ì¬í•˜ê²Œ ëœë‹¤. (ë³´í†µ ì–´ë…¸í…Œì´ì…˜ ë°©ì‹)\nSpring DocsëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œì— API ìŠ¤í™ì„ ì‘ì„±í•˜ê³ , asciidoctorë¥¼ í†µí•´ adoc íŒŒì¼ì„ ìƒì„±í•˜ê³  htmlë¡œ ë³€í™˜í•˜ì—¬ ë¬¸ì„œê°€ ì‘ì„±ëœë‹¤.\nì‰½ê²Œ ë§í•´, í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ HTTP specì´ ì‘ì„±ë˜ê³ , ì´ë¥¼ ì›í•˜ëŠ” ëŒ€ë¡œ ë¬¸ì„œì— ì‚½ì…í•˜ì—¬ ë¬¸ì„œë¥¼ ìƒì„±í•œë‹¤.</p>\n<ul>\n<li>ìƒìš© ì½”ë“œì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤</li>\n<li>ì»¤ìŠ¤í…€ í•˜ê¸° ìš©ì´í•˜ë‹¤</li>\n<li>í…ŒìŠ¤íŠ¸ë¥¼ ê°•ì œí•œë‹¤.</li>\n</ul>\n<p>ì´ëŸ° ì¥ì ì„ ê°€ì¡Œë‹¤. 3ê°€ì§€ ëª¨ë‘ êµ‰ì¥íˆ ë§¤ë ¥ì ì¸ ì¥ì ì´ë¼ Swaggerë³´ë‹¤ Spring docsë¥¼ ì„ íƒí•˜ê²Œ ëë‹¤.</p>\n<h3 id=\"ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C\" aria-label=\"ë¬¸ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¬¸ì œ</h3>\n<p>ì ìš© ë°©ë²•ì€ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë‹¤. build.gradles.ktsì˜ ì¼ë¶€ë¶„ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\">val asciidoctorExt<span class=\"token punctuation\">:</span> Configuration by configurations<span class=\"token punctuation\">.</span>creating\nval snippetsDir by extra <span class=\"token punctuation\">{</span> <span class=\"token function\">file</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">\"build/generated-snippets\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n\ndependencies <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">asciidoctorExt</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">\"org.springframework.restdocs:spring-restdocs-asciidoctor\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\ntasks<span class=\"token punctuation\">.</span>test <span class=\"token punctuation\">{</span>\n    outputs<span class=\"token punctuation\">.</span><span class=\"token function\">dir</span><span class=\"token punctuation\">(</span>snippetsDir<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\ntasks<span class=\"token punctuation\">.</span>asciidoctor <span class=\"token punctuation\">{</span>\n    inputs<span class=\"token punctuation\">.</span><span class=\"token function\">dir</span><span class=\"token punctuation\">(</span>snippetsDir<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">configurations</span><span class=\"token punctuation\">(</span>asciidoctorExt<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">dependsOn</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">baseDirFollowsSourceFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    doFirst <span class=\"token punctuation\">{</span>\n        delete <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">file</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">\"src/main/resources/static/docs\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\ntasks<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">\"copyHTML\"</span></span><span class=\"token punctuation\">,</span> Copy<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dependsOn</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">.</span>asciidoctor<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token function\">file</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">tasks<span class=\"token punctuation\">.</span>asciidoctor<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>outputDir</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/index.html\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">into</span><span class=\"token punctuation\">(</span><span class=\"token function\">file</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">\"src/main/resources/static/docs\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\ntasks<span class=\"token punctuation\">.</span>build <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dependsOn</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">.</span><span class=\"token function\">getByName</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">\"copyHTML\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\ntasks<span class=\"token punctuation\">.</span>bootJar <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dependsOn</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">.</span>asciidoctor<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">dependsOn</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">.</span><span class=\"token function\">getByName</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">\"copyHTML\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>ë‚´ê°€ ì‘ì„±í•œ index.adoc íŒŒì¼ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"asciidoc\"><pre class=\"language-asciidoc\"><code class=\"language-asciidoc\"><span class=\"token macro\"><span class=\"token function\">ifndef</span><span class=\"token punctuation\">::</span>snippets<span class=\"token attributes\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span></span>\n<span class=\"token attribute-entry tag\">:snippets: /build/generated-snippets</span>\n<span class=\"token macro\"><span class=\"token function\">endif</span><span class=\"token punctuation\">::</span><span class=\"token attributes\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span></span>\n<span class=\"token title important\"><span class=\"token punctuation\">=</span> API Document</span>\n<span class=\"token attribute-entry tag\">:doctype: book</span>\n<span class=\"token attribute-entry tag\">:icons: font</span>\n<span class=\"token attribute-entry tag\">:source-highlighter: highlightjs</span>\n<span class=\"token attribute-entry tag\">:toc: left</span>\n<span class=\"token attribute-entry tag\">:toclevels: 3</span>\n<span class=\"token attribute-entry tag\">:sectlinks:</span>\n<span class=\"token attribute-entry tag\">:docinfo: shared-head</span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">==</span> ì†Œê°œ</span>\nBottle Letter API\n\n<span class=\"token macro\"><span class=\"token function\">include</span><span class=\"token punctuation\">::</span>user.adoc<span class=\"token attributes\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span></span>\n<span class=\"token macro\"><span class=\"token function\">include</span><span class=\"token punctuation\">::</span>bottle.adoc<span class=\"token attributes\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span></span></code></pre></div>\n<p><code class=\"language-text\">user.adoc</code>ê³¼ <code class=\"language-text\">bottle.adoc</code>ì€\noperation::bottle-me-get[snippets=â€˜http-request,http-responseâ€™] ë“±ì˜ í˜•íƒœë¡œ ì‘ì„±í–ˆë‹¤.</p>\n<p>ê¸°ì¡´ì—ëŠ” <code class=\"language-text\">index.adoc</code> íŒŒì¼ë§Œ ìƒì„±í•˜ê³ , ì•ˆì— ëª¨ë“  ë‚´ìš©ì„ ê¸°ì¬í–ˆë‹¤.\nê·¸ ë‹¹ì‹œì—ëŠ” ë¬¸ì œê°€ ì—†ì—ˆëŠ”ë°, ìœ„ì™€ ê°™ì´ ë¦¬íŒ©í† ë§ í›„ì—ëŠ” local IDE ì—ë””í„°ì—ì„œëŠ” ì •ìƒì ì¸ htmlì´ ìƒì„±ëì§€ë§Œ,\nì‹¤ì œ ìƒì„±ëœ htmlì€ <code class=\"language-text\">user.adoc</code>ê³¼ <code class=\"language-text\">bottle.adoc</code>ì„ ì°¸ì¡°í•˜ì§€ ëª»í–ˆë‹¤.</p>\n<p>ë¬¸ì œì˜ ì›ì¸ì€</p>\n<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\">tasks<span class=\"token punctuation\">.</span>asciidoctor <span class=\"token punctuation\">{</span>\n    inputs<span class=\"token punctuation\">.</span><span class=\"token function\">dir</span><span class=\"token punctuation\">(</span>snippetsDir<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">configurations</span><span class=\"token punctuation\">(</span>asciidoctorExt<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">dependsOn</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">baseDirFollowsSourceFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ì´ë…€ì„</span>\n    doFirst <span class=\"token punctuation\">{</span>\n        delete <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">file</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">\"src/main/resources/static/docs\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì—¬ê¸°ì— ìˆì—ˆë‹¤. ì—ëŸ¬ì½”ë“œëŠ” ~/bt/user.adocì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë¼ê³  ë‚˜ì™”ë‹¤.</p>\n<p>index.adoc íŒŒì¼ì€ ~/bt/src/docsì— ì¡´ì¬í–ˆëŠ”ë° pathê°€ ì˜ëª» ì„¤ì •ë˜ê³  ìˆì—ˆë‹¤.\nê¸°ë³¸ pathê°€ ìœ„ì™€ ê°™ì´ ì¸ì‹ëœ ì´ìœ ëŠ” Asciidoctorì˜ ê¸°ë³¸ pathì— ìˆë‹¤.</p>\n<ul>\n<li>ê¸°ë³¸ì ìœ¼ë¡œ AsciidoctorëŠ” ì‹¤í–‰ ë””ë ‰í† ë¦¬ë¥¼ baseDirë¡œ ì‚¬ìš©í•œë‹¤.</li>\n<li>Gradleì€ í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰ëœë‹¤.</li>\n<li>Asciidoctor í”ŒëŸ¬ê·¸ì¸ì€ gradleì˜ ì‹¤í–‰ ë””ë ‰í† ë¦¬ë¥¼ Asciidoctorì˜ baseDirë¡œ ì„¤ì •í•œë‹¤.</li>\n</ul>\n<p>ë•Œë¬¸ì— local í™˜ê²½ì—ì„œëŠ” ~/bt/src/docs í´ë” ì•ˆì— <code class=\"language-text\">index.adoc</code>, <code class=\"language-text\">user.adoc</code>ì´ ì¡´ì¬í•´ì„œ ë¬¸ì„œê°€ ì˜ ìƒì„±ë˜ì–´ ë³´ì˜€ë‹¤.</p>\n<p>ê·¸ëŸ¬ë‚˜ ë¹Œë“œì‹œì—ëŠ” ~/bt ë¥¼ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¡œ íŒŒì¼ì„ ì°¾ê¸° ë•Œë¬¸ì— ì¸ì‹ë˜ì§€ ì•Šì•˜ë˜ ê²ƒì´ë‹¤.</p>\n<p>í•´ê²° ë°©ë²•ì€ asciidoctor í”ŒëŸ¬ê·¸ì¸ì˜ <code class=\"language-text\">baseDirFollowsSourceFile()</code> ë©”ì„œë“œì´ë‹¤.\nì´ë¥¼ ì‚¬ìš©í•˜ë©´ ê° ì†ŒìŠ¤ íŒŒì¼ì˜ ë””ë ‰í† ë¦¬ê°€ baseDirë¡œ ì„¤ì •ëœë‹¤.</p>\n<p>ë•Œë¬¸ì— <code class=\"language-text\">index.adoc</code>ì—ì„œ <code class=\"language-text\">include::user.adoc[]</code>ì„ ì‚¬ìš©í•˜ë©´\n<code class=\"language-text\">index.adoc</code>ì˜ ê²½ë¡œì¸ ~/bt/src/docs/user.adocì„ ì°¸ì¡°í•˜ê²Œ ëœë‹¤.</p>\n<p>ê¸°ë¡ì„ ìœ„í•œ ê¸€ì´ë¼ê³  ë‘ì„œì—†ì´ ì ì—ˆìŠµë‹ˆë‹¤..!</p>","frontmatter":{"date":"August 06, 2023","title":"Spring docs ì ìš© ì¤‘ ë¬¸ì œ","categories":"Spring","author":"ì§€êµ¬ê¹œëƒ¥","emoji":"ğŸŒ±"},"fields":{"slug":"/passion/bottle-letter/SpringDocs/"}},"prev":{"id":"7a03e671-9592-5f87-8ec7-cbb4956c53f1","html":"<p><strong>ë² ìŠ¤íŠ¸ë¼ë¹ˆìŠ¤</strong> í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° Jenkinsë¥¼ ì‚¬ìš©í–ˆë‹¤.\nì„œë²„ ì•„í‚¤í…ì³ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<p>Jenkinsë¡œ CI / CDë¥¼ êµ¬ì¶•í•œê±´ ì²˜ìŒì´ì—ˆëŠ”ë°, ê·¸ ê³¼ì •ì—ì„œ ë§Œë‚¬ë˜ ë¬¸ì œë“¤ì„ ë‚¨ê²¨ë‘ê³ ì í•œë‹¤.\nJenkinsì˜ ì„¤ì • ë°©ë²• ë“±ì€ ê°„ë‹¨íˆë§Œ ì ì–´ë³´ê² ë‹¤.</p>\n<h3 id=\"jenkins-ì„¤ì •\" style=\"position:relative;\"><a href=\"#jenkins-%EC%84%A4%EC%A0%95\" aria-label=\"jenkins ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins ì„¤ì •</h3>\n<p>Jenkins ì„œë²„ëŠ” Naver Cloud Platform(NCP)ë¥¼ ì‚¬ìš©í–ˆë‹¤.\nmicro ë²„ì „ì€ ë¬´ë£Œì´ê¸° ë•Œë¬¸ì— ì‚¬ìš©í–ˆëŠ”ë°, ì´í›„ Compactë¡œ ì—…ê·¸ë ˆì´ë“œí–ˆë‹¤.\nNCPì˜ ì„œë²„ëŠ” ì„ íƒí•œ Jenkins ë²„ì „ì˜ ì´ë¯¸ì§€ë¥¼ í†µí•´ ë°°í¬ëœë‹¤. ë•Œë¬¸ì— 18080í¬íŠ¸ ì ‘ê·¼ ê¶Œí•œ ì„¤ì •ì„ í•˜ë©´ ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.</p>\n<p>JenkinsFileì„ í†µí•´ ê´€ë¦¬í•˜ëŠ” ê²ƒê³¼ ì›¹í˜ì´ì§€ì—ì„œ FreeStyleë¡œ í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ëŠ” ë°©ì‹ì´ ìˆë‹¤.\në‚˜ëŠ” í›„ìë¥¼ íƒí–ˆê³  ì¥ë‹¨ì„ ë¹„êµí•˜ìë©´</p>\n<ul>\n<li>ë²„ì „ê´€ë¦¬\n<ul>\n<li>JenkinsFileì€ gitì„ í†µí•´ ê´€ë¦¬ë  ìˆ˜ ìˆì–´, ë²„ì „ ê´€ë¦¬ì— ìš©ì´í•˜ë‹¤</li>\n</ul>\n</li>\n<li>ì¬ì‚¬ìš©ì„±\n<ul>\n<li>JenkinsFileì€ ì½”ë“œ í˜•íƒœë¡œ ê´€ë¦¬í•˜ë¯€ë¡œ, ì¬ì‚¬ìš©ì„±ì´ ë›°ì–´ë‚˜ë‹¤</li>\n</ul>\n</li>\n<li>ìœ ì§€ë³´ìˆ˜\n<ul>\n<li>ì´ê²ƒë„ ë§ˆì°¬ê°€ì§€.</li>\n</ul>\n</li>\n<li>ë³µì¡ë„\n<ul>\n<li>JenkinsFileì€ Groovy ë¬¸ë²•ì„ ìµí˜€ì•¼ í•˜ê³ , FreeStyle Projectë³´ë‹¤ëŠ” ë³µì¡ë„ê°€ ë†’ë‹¤.</li>\n</ul>\n</li>\n</ul>\n<p>ê²°ê³¼ì ìœ¼ë¡œ, JenkinsFileë¡œ ì‘ì„±í•˜ê³  í”„ë¡œì íŠ¸ ì½”ë“œì— í¬í•¨í•˜ëŠ” ê²ƒì´ ì´ìƒì ì´ë‹¤.\nê·¸ëŸ¬ë‚˜ í”„ë¡œì íŠ¸ì˜ ê·œëª¨ê°€ ì‘ì•„ ìš°ì„  FreeStyle projectë¡œ ì„¤ì •í–ˆë‹¤.</p>\n<h3 id=\"jenkinsë¡œ-ì–´ë–¤-ì¼ì„\" style=\"position:relative;\"><a href=\"#jenkins%EB%A1%9C-%EC%96%B4%EB%96%A4-%EC%9D%BC%EC%9D%84\" aria-label=\"jenkinsë¡œ ì–´ë–¤ ì¼ì„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkinsë¡œ ì–´ë–¤ ì¼ì„?</h3>\n<p>Jenkinsì—ê²Œ ë°”ë¼ëŠ” ê²ƒì€ CI ì™€ CDì˜€ë‹¤.</p>\n<p>CIëŠ” ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±í–ˆë‹¤.</p>\n<ul>\n<li>Github Webhookì„ ë“±ë¡ (develop ë¸Œëœì¹˜ commit ë°œìƒ ì‹œ, hookì„ ë³´ëƒ„)</li>\n<li>webhookì´ ë°œìƒí•˜ë©´ Jenkins ì„œë²„ì—ì„œ ì–´ë–¤ ì¼ì„ ìˆ˜í–‰í• ì§€ ì„¤ì •\n<ul>\n<li>Build Stepì—ì„œ ê°„ë‹¨íˆ Clean, build ë§Œ ìˆ˜í–‰</li>\n</ul>\n</li>\n</ul>\n<p>\bCD</p>\n<ul>\n<li>Publish Over SSH í”ŒëŸ¬ê·¸ì¸ì„ í†µí•´, WAS ì„œë²„ì— SSH ì ‘ê·¼ ì„¤ì •</li>\n<li>CI ê³¼ì •ì—ì„œ ë¹Œë“œí•œ jar íŒŒì¼ì„ WAS ì„œë²„ì— ë³µì‚¬í•˜ê³ , ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•¨</li>\n</ul>\n<p>ì¶•ì•½í•˜ìë©´ ì´ëŸ° ê³¼ì •ì„ í†µí•´ CI/CDë¥¼ í•´ì¤€ë‹¤.</p>\n<h3 id=\"ì–´ë–¤-ë¬¸ì œë“¤ì´\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%A4-%EB%AC%B8%EC%A0%9C%EB%93%A4%EC%9D%B4\" aria-label=\"ì–´ë–¤ ë¬¸ì œë“¤ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì–´ë–¤ ë¬¸ì œë“¤ì´..!</h3>\n<p>JenkinsëŠ” Springì„ ì‚¬ìš©í•´ì„œ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ì¸í”„ë¼ë¥¼ ìœ„í•œ ë„êµ¬ì´ë‹¤ ë³´ë‹ˆ\nì—ëŸ¬ë„ ìƒì†Œí•˜ê³ , ì—ëŸ¬ í•¸ë“¤ë§ ìì²´ê°€ ì¡°ê¸ˆ ì–´ë ¤ì› ë‹¤.\në‹¨ìˆœí•œ ì˜¤ë¥˜ë„, ë§¤ë²ˆ ë¹Œë“œë¥¼ í†µí•´ í™•ì¸í•˜ë‹¤ë³´ë‹ˆ ì‹œê°„ë„ ì˜¤ë˜ê±¸ë ¸ë‹¤.</p>\n<p>Publish Over SSH ë¼ëŠ” Jenkins í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í–ˆë‹¤.\nê·¸ ì™¸ì—ë„ ì´ì „ì— ë§›ë§Œ ë³¸ Ansible, Terraform ë“±ì„ í†µí•´ CI/CDë¥¼ ìë™í™” í•  ìˆ˜ë„ ìˆì„ ê²ƒì´ë‹¤. (ë„ˆë¬´ ì–´ë µë‹¤..)</p>\n<p>Jenkins ì„œë²„ -> WAS ì„œë²„ì— jar ë³µì‚¬ ê³¼ì •ì—ì„œ ì—°ê²° ì„¤ì •ì€ 22í¬íŠ¸ë¥¼ ì—´ì–´ì¤Œìœ¼ë¡œ í•´ê²°í–ˆë‹¤.\nê·¸ëŸ¬ë‚˜ ì´ëŸ° ë°©ì‹ì€ ë³´ì•ˆì— ì¢‹ì§€ ì•Šë‹¤ê³  ìƒê°ë˜ëŠ”ë°,</p>\n<ul>\n<li>Jenkins ì„œë²„ì˜ ë³´ì•ˆ ë¬¸ì œ == WAS ì„œë²„ ë³´ì•ˆ ë¬¸ì œ</li>\n<li>ë³µì¡ë„ ì¦ê°€: ssh key ê´€ë¦¬, WASì— Script íŒŒì¼ì„ ê´€ë¦¬</li>\n<li>ë‘ ì„œë²„ ê°„ì˜ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì— ì˜ì¡´í•˜ê²Œ ë¨</li>\n</ul>\n<p>argo CDë‚˜ ì—¬íƒ€ ë‹¤ë¥¸ ì¸í”„ë¼ íˆ´ì„ ê³µë¶€í•˜ê³  ì‚¬ìš©í•´ë³´ë©° ë¹„êµí•´ë³´ë©´ ì¢‹ê² ë‹¤!</p>\n<h4 id=\"ë¬¸ì œ-1-jar-íŒŒì¼-ê²½ë¡œ\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-1-jar-%ED%8C%8C%EC%9D%BC-%EA%B2%BD%EB%A1%9C\" aria-label=\"ë¬¸ì œ 1 jar íŒŒì¼ ê²½ë¡œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¬¸ì œ 1. Jar íŒŒì¼ ê²½ë¡œ</h4>\n<p>Remote directory ê²½ë¡œë¥¼ <code class=\"language-text\">/home/ubuntu/best-robbins/jar</code>ë¡œ ì ˆëŒ€ê²½ë¡œë¡œ ëª…ì‹œí–ˆë‹¤.\nJar íŒŒì¼ì´ ë³µì‚¬ëŠ” ëì§€ë§Œ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ëŠ”ë°, ì´ìœ ëŠ”\n<code class=\"language-text\">/home/ubuntu/home/ubuntu/best-robbins/jar</code> ê²½ë¡œì— ë³µì‚¬ê°€ ëê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ì›ì¸ì´ ë¬´ì—‡ì¼ê¹Œ?\ní™•ì‹¤í•œê±´ ê¸°ë³¸ pathê°€ /home/ubuntu/best-robbins ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.\n/home/ubuntu ê¹Œì§„ ì´í•´ê°€ ë˜ì§€ë§Œ, ë‚´ê°€ ë§Œë“  í´ë”ê°€ ê¸°ë³¸ pathê°€ ëœ ì´ìœ ë¥¼ ì˜ ëª¨ë¥´ê² ë‹¤.\nbashrc, bash_profile, PATH, HOME ë“± ëª¨ë“  ì„¤ì •ì„ í™•ì¸í•´ë´¤ì§€ë§Œ best-robbins í´ë”ê°€ ê²½ë¡œë¡œ ì„¤ì •ëœ ê²½ìš°ëŠ” ì—†ì—ˆë‹¤. ë¬¼ë¡  Jenkins ì„¤ì •ì—ì„œ í•´ë‹¹ í´ë” ê²½ë¡œë¥¼ ì§€ì •í•œ ì ë„ ì—†ê³  ë§ì´ë‹¤.</p>\n<p>Publish Over SSHë¥¼ ì‚¬ìš©í–ˆê¸°ì—, í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì— ë¬¸ì œê°€ ìˆì„ ìˆ˜ë„ ìˆì§€ë§Œ WAS ì„œë²„ì˜ ì„¤ì • ë¬¸ì œ ê°™ì€ë°, ì •í™•í•œ ì›ì¸ì„ ë°íˆì§€ ëª»í–ˆë‹¤â€¦ ì •í™•í•œ Logging í†µí•´ ë¬¸ì œë¥¼ íŒŒì•…í•´ ë´ì•¼í•œë‹¤.</p>\n<h4 id=\"ë¬¸ì œ-2-sudo-java-ì‹¤í–‰-ì‹œ-í™˜ê²½ë³€ìˆ˜-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-2-sudo-java-%EC%8B%A4%ED%96%89-%EC%8B%9C-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EB%AC%B8%EC%A0%9C\" aria-label=\"ë¬¸ì œ 2 sudo java ì‹¤í–‰ ì‹œ í™˜ê²½ë³€ìˆ˜ ë¬¸ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¬¸ì œ 2. sudo java ì‹¤í–‰ ì‹œ í™˜ê²½ë³€ìˆ˜ ë¬¸ì œ</h4>\n<p>application-dev.ymlì— ì •ì˜í•œ DATABASE ì •ë³´ê°€ ìˆë‹¤. PATH, password, username ë“±ì„ ì •ì˜í–ˆëŠ”ë°, ë³´ì•ˆì„ ìœ„í•´ WAS ì„œë²„ì— í™˜ê²½ë³€ìˆ˜ë¡œ ë“±ë¡í–ˆë‹¤.</p>\n<p>ë¬¸ì œëŠ” <code class=\"language-text\">sudo java -Dspring.profiles.active=dev -jar /home/ubuntu/jar/your-jar-file.jar</code>\nì™€ ê°™ì´ ì‹¤í–‰í•  ë•Œ í™˜ê²½ë³€ìˆ˜ê°€ ì‘ë™í•˜ì§€ ì•Šì•˜ë‹¤.</p>\n<p><strong>ì›ì¸</strong> : sudoë¡œ ì‹¤í–‰í•˜ë©´ í™˜ê²½ë³€ìˆ˜ê°€ ë‹¤ë¥´ë‹¤!\nì „í˜€ ëª°ëë˜ ì‚¬ì‹¤ì¸ë°, sudo -E ì˜µì…˜ì„ ì§€ì •í•´ì¤˜ì•¼ ì„¤ì •í•œ í™˜ê²½ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë•Œë¬¸ì— í™˜ê²½ë³€ìˆ˜ë¥¼ í¬í•¨í•´ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” -E ì˜µì…˜ì„ ë¶™ì—¬ì£¼ì.</p>\n<h4 id=\"ë¬¸ì œ-3-ì¸í„°ë ‰í‹°ë¸Œ-ëª¨ë“œ\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-3-%EC%9D%B8%ED%84%B0%EB%A0%89%ED%8B%B0%EB%B8%8C-%EB%AA%A8%EB%93%9C\" aria-label=\"ë¬¸ì œ 3 ì¸í„°ë ‰í‹°ë¸Œ ëª¨ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¬¸ì œ 3. \bì¸í„°ë ‰í‹°ë¸Œ ëª¨ë“œ</h4>\n<p>Jenkins ì„œë²„ëŠ” jar íŒŒì¼ì„ ë³µì‚¬ í›„, WAS ì„œë²„ì— ì¡´ì¬í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ì„ ìœ„í•´\n<code class=\"language-text\">sh /my/script.sh</code> ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤. í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ëŠ” ê¸°ì¡´ ìŠ¤í”„ë§ ì„œë²„ë¥¼ ì¢…ë£Œí•˜ê³ , ìƒˆë¡­ê²Œ jar íŒŒì¼ì„ ì‹¤í–‰í•œë‹¤.\në¬¸ì œëŠ” í™˜ê²½ë³€ìˆ˜ê°€ ë˜!! ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•Šì•˜ë‹¤.</p>\n<p><strong>ì›ì¸</strong> : ì½˜ì†”ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œ ë¬¸ì œê°€ ì—†ì—ˆë‹¤. ê²°êµ­ Jenkinsì—ì„œì˜ ì ‘ê·¼ì´ ë¬¸ì œì¸ë°, ë‚´ê°€ ì§€ì •í•œ í™˜ê²½ë³€ìˆ˜ëŠ” bashrcì— ì €ì¥ë˜ì–´ ìˆê³ , ì„œë²„ê°€ ì‹¤í–‰ë  ë•Œ source ~/.bashrc ê°€ ì‹¤í–‰ëœë‹¤.\nbashrcë¥¼ ëœ¯ì–´ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ ë‚´ìš©ì´ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># If not running interactively, don't do anything</span>\n<span class=\"token keyword\">case</span> $- <span class=\"token keyword\">in</span>\n    *i*<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n      *<span class=\"token punctuation\">)</span> <span class=\"token builtin class-name\">return</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Jenkinsë¥¼ í†µí•´ ì ‘ê·¼í•œ ê²½ìš° non-interactive modeì´ë‹¤. ë•Œë¬¸ì— bashrc ìì²´ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.\në•Œë¬¸ì—</p>\n<ul>\n<li>ìŠ¤í¬ë¦½íŠ¸ ë‚´ì—ì„œ bashrcë¥¼ í™œì„±í™”</li>\n<li>systemdì™€ ê°™ì€ ì„œë¹„ìŠ¤ ê´€ë¦¬ ë„êµ¬ë¥¼ ì‚¬ìš©</li>\n<li>script ë‚´ì— export ëª…ë ¹ì–´ë¥¼ ì €ì¥\në“±ì˜ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<p>ì´ëŸ° ê³¼ì •ì„ í†µí•´ CI/CDë¥¼ ì„¤ì •í–ˆë”°. ì‹œê°„ì´ ê½¤ ì§€ë‚˜ê³  ë‘ì„œì—†ì´ ì ì—ˆë”ë‹ˆ, ì •ë§ ë”ì°í•œ ê¸€ì´ ëë‹¤.</p>\n<p>ë¹ ë¥¸ ê°œë°œì„ ìœ„í•´ ì„ íƒí•œ ë°©ë²•ë“¤ì´ ë§ì•„ì„œ, ë³´ë‹¤ ì¢‹ì€ ì„¤ê³„ë¥¼ ê°€ì§„ CI/CDë¡œ ì—…ê·¸ë ˆì´ë“œ í•´ë³¼ ì˜ˆì •ì´ë‹¤!</p>","frontmatter":{"date":"October 05, 2023","title":"Jenkinsë¥¼ í†µí•´ CI/CDë¥¼ í•˜ë˜ ì¤‘..","categories":"Infra","author":"ì§€êµ¬ê¹œëƒ¥","emoji":"ğŸŒ±"},"fields":{"slug":"/passion/best-robbins/jenkins/"}},"site":{"siteMetadata":{"siteUrl":"https://ggam-nyang.github.io","comments":{"utterances":{"repo":"ggam-nyang/ggam-nyang.github.io"}}}}},"pageContext":{"slug":"/passion/bottle-letter/SpringSecurity-login/","nextSlug":"/passion/bottle-letter/SpringDocs/","prevSlug":"/passion/best-robbins/jenkins/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}