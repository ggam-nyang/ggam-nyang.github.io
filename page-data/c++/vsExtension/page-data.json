{"componentChunkName":"component---src-templates-blog-template-js","path":"/c++/vsExtension/","result":{"data":{"cur":{"id":"6cb8c85c-b1db-527d-9f59-e24867c093df","html":"<h2 id=\"-mac-parallels\" style=\"position:relative;\"><a href=\"#-mac-parallels\" aria-label=\" mac parallels permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>💻 Mac Parallels</h2>\n<p>맥북에서 parallels를 이용해, Window를 설치했다.</p>\n<p>Window 환경에서 개발을 진행하기 위해서 설치했고, 가상머신 위에서 얼마나 쾌적할지 걱정했지만 사용성이 괜찮았다.<br>\n물론 아직 규모 있는 프로젝트를 진행하진 않아서 문제가 없었지만, 성능이 더 요구되면 어려울 수도 있다.</p>\n<p>문제는 Parallels 위에서 Visual Studio 2022를 사용할 때 발생했다.<br>\nVS도 Extension이 있는데, 대부분의 extension을 설치할 수 없었다.<br>\n여러 시도를 한 끝에 이런 환경에서 설치하는 방법을 남겨 놓는다!</p>\n<h2 id=\"vsix-파일-수정\" style=\"position:relative;\"><a href=\"#vsix-%ED%8C%8C%EC%9D%BC-%EC%88%98%EC%A0%95\" aria-label=\"vsix 파일 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VSIX 파일 수정</h2>\n<p><a href=\"https://marketplace.visualstudio.com/vs\">vs marketplace</a>에 들어가보면 다양한 extension을 볼 수 있다.<br>\nvsix 파일을 설치해서 실행하면, 설치 할 수 있는 버전을 찾을 수 없다고 나온다.<br>\n이상하게 IDE 내에서 검색되는 extension과 웹에 있는게 달랐는데, 결과적으로 각 extension마다 지원하는 버전과 프로세서가 다르기 때문이다.</p>\n<p>Mac M1은 arm64 칩을 사용한다. 컴퓨터 하드웨어를 잘 모르지만, Window 생태계에서는 대부분 intel 혹은 Arm 칩을 사용하는 것으로 안다.\n때문에 대부분의 Extension들이 Arm64를 지원하지 않았다. (<strong>amd64와 헷갈렸다…</strong>)</p>\n<p>그래서 <a href=\"https://www.bytehide.com/blog/visual-studio-2022-extensions\">VS extension top 10</a>의 대부분을 사용할 수 없다.</p>\n<p>marketplace에서 extension을 설치하면 .vsix 확장자의 파일이 설치된다.<br>\n7-zip (혹은 다른 zip 관련 프로그램)을 설치 후!<br>\n해당 파일에 대해 아래와 같이 진행한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABwElEQVQoz11SibLaMBDL//9cDxgYCoQkQE7nsh07B6COtoWXNjMax+u1tFpvEKcK20ghbRwSNaAcXoLCPgW5XhA3I86VR9TMSPoXQjUiVF7Wq34hah9Iuwn8gk5bxJXBt18hvv/Y4JYV0NbD+klg3IjazlB2QeOeaEegMrOAe/LUXN3yh9AZBd0p5GWJ2/WKPMtgjcY8TfDOwbkBfrDQXQureyzTCKM7wWOZ8HosGP2AwRosy4Kg6zpkZY3jNUcSx0jTVJBlGYwxsHaAsRa73Q7b7Ra91nDewzkHa61gGAYB84PHskAbizQvsdn8xPF4hNZaEsZxxMRKvcfpdML5fEbf9xJnjGdrMB7MMy84tG2DOI5FeZ7nTxIvEnmeI4oiWYuiQFmWH5I1Al7u+w73+x1hGKJpmo/6usLD4SCWScjYWvSfCqd5EoskSpJE1Gn3neD/9ouW9/u9tIT9ZYXM49m6gGC0DoMxUEqJJQap/rbwtlxVFW63mxCxSrphjPu2bb8In1bBtBWapkVZFPJSVP2/P5fLRWyzzwTF6Yao6/qLsKwbeWWlakmiIl9yXSVFaJMuOCZsEXM4cgT/GefY/AZ0U0XxGXCHKQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vsix 압축 열기\"\n        title=\"vsix 압축 열기\"\n        src=\"/static/a5a45f84049860e2fe25dc2aae7bcdd2/37523/7-zip-pic.png\"\n        srcset=\"/static/a5a45f84049860e2fe25dc2aae7bcdd2/e9ff0/7-zip-pic.png 180w,\n/static/a5a45f84049860e2fe25dc2aae7bcdd2/f21e7/7-zip-pic.png 360w,\n/static/a5a45f84049860e2fe25dc2aae7bcdd2/37523/7-zip-pic.png 720w,\n/static/a5a45f84049860e2fe25dc2aae7bcdd2/302a4/7-zip-pic.png 1080w,\n/static/a5a45f84049860e2fe25dc2aae7bcdd2/07a9c/7-zip-pic.png 1440w,\n/static/a5a45f84049860e2fe25dc2aae7bcdd2/e4ee8/7-zip-pic.png 1496w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n압축을 열고~</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABHUlEQVQoz3WSiW6DMAyGef83nLqSBDJycIi7hOuf7CmoXbdIlpGxP/92kiitkOsvWOtQGAPnPayx8M6i73s8Hg9M0/Ri8zxf/tkolnyKG6TMcE8F0jSFEBJSSOg8R13XaJoG4ziyDcPA1nXd5alp9AwsdIq+H1CVJYwxnLiuK9uyBIysZILW+oK3bYsQAgMIRupokn3fkWRZxmN2XYuiKDgpnvM82YewQEoJ5xyDCHgcBzel2PNJhEg5aK3hIlIQYRG4LAuElPDeY9s2Vkpq1jXwVPQda5Lbxx2+9CjLEqT2LyCNI4R4B4bAYkjtBZRCoaoqOGehlPpf4Rvw4EZ5nr8Ch+HnadCe4oX8BpIa2hvtl4qpAf0jONXEPAJ+AxACZp1OGKEQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"extension manifest 열기\"\n        title=\"extension manifest 열기\"\n        src=\"/static/74e725600848550d4191548ddc54a23b/37523/extension_archive.png\"\n        srcset=\"/static/74e725600848550d4191548ddc54a23b/e9ff0/extension_archive.png 180w,\n/static/74e725600848550d4191548ddc54a23b/f21e7/extension_archive.png 360w,\n/static/74e725600848550d4191548ddc54a23b/37523/extension_archive.png 720w,\n/static/74e725600848550d4191548ddc54a23b/302a4/extension_archive.png 1080w,\n/static/74e725600848550d4191548ddc54a23b/07a9c/extension_archive.png 1440w,\n/static/74e725600848550d4191548ddc54a23b/31d79/extension_archive.png 1954w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\nextension manifest 파일을 편집한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABd0lEQVQoz2VT2XKDMBDj//8OCglkkmBuCJgjCeR6UEdbTKF90MhmjSztgpUkCU6nE+q6RtM00LoR5l6e6Z91WZa4XC6CqqowTRMej4fw6/VaYFVliSAIEEURlAqFwzCUS87nszBFeAmFdKuFeQmZtfv9jnEcRdzizbZtw3W/YDsOPM+D67o4Ho+LcBzHItC2LbTW6PoOfd9jGAYMff/7vOtg8SAdUsBARUqcRlEMtoSCcZJAKSWgK91oEXy/3xuIQ9f14Ps+9vu9gIJpmkJFEa7XK57Pp8RZ43a7SUzW1rCyLENwOMhtPESmdTJjmd5wAOvm0w2ZIpuh1PUFjuPAD3yJR2dkRqb7fu4RG29E1jCChq2iKLDb7eRlE4OgAPd0ZmBqEnuc/sUVQUbmdNl4rmUAM5J5EHRNcDB5niMvcmG25fP5bNxaLPCzSbMMbdstH3jbaonKPXtqwNrPD6AFPEPhxSEF6YIF9muDeTBmPcz4O3G2wwh+A97IPDYSzKrsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"manifest 내용\"\n        title=\"manifest 내용\"\n        src=\"/static/7d37d0d1cfc267f46a7a012cf27959d5/37523/extension_manifest_picture.png\"\n        srcset=\"/static/7d37d0d1cfc267f46a7a012cf27959d5/e9ff0/extension_manifest_picture.png 180w,\n/static/7d37d0d1cfc267f46a7a012cf27959d5/f21e7/extension_manifest_picture.png 360w,\n/static/7d37d0d1cfc267f46a7a012cf27959d5/37523/extension_manifest_picture.png 720w,\n/static/7d37d0d1cfc267f46a7a012cf27959d5/302a4/extension_manifest_picture.png 1080w,\n/static/7d37d0d1cfc267f46a7a012cf27959d5/07a9c/extension_manifest_picture.png 1440w,\n/static/7d37d0d1cfc267f46a7a012cf27959d5/5b503/extension_manifest_picture.png 1976w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n여기서 보면 IDE(vs)의 Target Version과 Architecture 등이 있다.<br>\n여기서 버전이 맞지 않다면 버전을, Arm64 환경에서 동작해야 한다면 Architecture를 변경해주면 vsix 파일이 잘 작동한다.</p>\n<p>물론 extension의 설정을 변경해서, 오작동하는 경우도 있을테지만 theme와 같은 extension들은 크게 충돌하지 않는 것 같다!</p>\n<p>때문에 Mac Parallels에서도 extension을 설치할 수 있었다!</p>","excerpt":"💻 Mac Parallels 맥북에서 parallels를 이용해, Window를 설치했다. Window 환경에서 개발을 진행하기 위해서 설치했고, 가상머신 위에서 얼마나 쾌적할지 걱정했지만 사용성이 괜찮았다. 물론 아직 규모 있는 프로젝트를 진행하진 않아서 문제가 없었지만, 성능이 더 요구되면 어려울 수도 있다. 문제는 Parallels 위에서 Visual Studio 2022를 사용할 때 발생했다. VS도 Extension이 있는데, 대부분의 extension을 설치할 수 없었다. 여러 시도를 한 끝에 이런 환경에서 설치하는 방법을 남겨 놓는다! VSIX 파일 수정 vs marketplace에 들어가보면 다양한 extension을 볼 수 있다. vsix 파일을 설치해서 실행하면, 설치 할 수 있는 버전을 찾을 수 없다고 나온다. 이상하게 IDE 내에서 검색되는 extension과 웹에 있는게 달랐는데, 결과적으로 각 extension마다 지원하는 버전과 프로세서가 다르기 때문이다…","frontmatter":{"date":"January 16, 2024","title":"Mac Parallels에서 Visual Studio Extension 설치하기","categories":"IDE","author":"지구깜냥","emoji":"✏️"},"fields":{"slug":"/c++/vsExtension/"}},"next":{"id":"7a03e671-9592-5f87-8ec7-cbb4956c53f1","html":"<p><strong>베스트라빈스</strong> 프로젝트를 진행하며 Jenkins를 사용했다.\n서버 아키텍쳐는 아래와 같다.</p>\n<p>Jenkins로 CI / CD를 구축한건 처음이었는데, 그 과정에서 만났던 문제들을 남겨두고자 한다.\nJenkins의 설정 방법 등은 간단히만 적어보겠다.</p>\n<h3 id=\"jenkins-설정\" style=\"position:relative;\"><a href=\"#jenkins-%EC%84%A4%EC%A0%95\" aria-label=\"jenkins 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins 설정</h3>\n<p>Jenkins 서버는 Naver Cloud Platform(NCP)를 사용했다.\nmicro 버전은 무료이기 때문에 사용했는데, 이후 Compact로 업그레이드했다.\nNCP의 서버는 선택한 Jenkins 버전의 이미지를 통해 배포된다. 때문에 18080포트 접근 권한 설정을 하면 웹사이트에서 접근이 가능하다.</p>\n<p>JenkinsFile을 통해 관리하는 것과 웹페이지에서 FreeStyle로 프로젝트를 설정하는 방식이 있다.\n나는 후자를 택했고 장단을 비교하자면</p>\n<ul>\n<li>버전관리\n<ul>\n<li>JenkinsFile은 git을 통해 관리될 수 있어, 버전 관리에 용이하다</li>\n</ul>\n</li>\n<li>재사용성\n<ul>\n<li>JenkinsFile은 코드 형태로 관리하므로, 재사용성이 뛰어나다</li>\n</ul>\n</li>\n<li>유지보수\n<ul>\n<li>이것도 마찬가지.</li>\n</ul>\n</li>\n<li>복잡도\n<ul>\n<li>JenkinsFile은 Groovy 문법을 익혀야 하고, FreeStyle Project보다는 복잡도가 높다.</li>\n</ul>\n</li>\n</ul>\n<p>결과적으로, JenkinsFile로 작성하고 프로젝트 코드에 포함하는 것이 이상적이다.\n그러나 프로젝트의 규모가 작아 우선 FreeStyle project로 설정했다.</p>\n<h3 id=\"jenkins로-어떤-일을\" style=\"position:relative;\"><a href=\"#jenkins%EB%A1%9C-%EC%96%B4%EB%96%A4-%EC%9D%BC%EC%9D%84\" aria-label=\"jenkins로 어떤 일을 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins로 어떤 일을?</h3>\n<p>Jenkins에게 바라는 것은 CI 와 CD였다.</p>\n<p>CI는 아래와 같이 구성했다.</p>\n<ul>\n<li>Github Webhook을 등록 (develop 브랜치 commit 발생 시, hook을 보냄)</li>\n<li>webhook이 발생하면 Jenkins 서버에서 어떤 일을 수행할지 설정\n<ul>\n<li>Build Step에서 간단히 Clean, build 만 수행</li>\n</ul>\n</li>\n</ul>\n<p>\bCD</p>\n<ul>\n<li>Publish Over SSH 플러그인을 통해, WAS 서버에 SSH 접근 설정</li>\n<li>CI 과정에서 빌드한 jar 파일을 WAS 서버에 복사하고, 스크립트를 실행함</li>\n</ul>\n<p>축약하자면 이런 과정을 통해 CI/CD를 해준다.</p>\n<h3 id=\"어떤-문제들이\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%A4-%EB%AC%B8%EC%A0%9C%EB%93%A4%EC%9D%B4\" aria-label=\"어떤 문제들이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어떤 문제들이..!</h3>\n<p>Jenkins는 Spring을 사용해서 서버를 구축하는게 아니라 인프라를 위한 도구이다 보니\n에러도 생소하고, 에러 핸들링 자체가 조금 어려웠다.\n단순한 오류도, 매번 빌드를 통해 확인하다보니 시간도 오래걸렸다.</p>\n<p>Publish Over SSH 라는 Jenkins 플러그인을 사용했다.\n그 외에도 이전에 맛만 본 Ansible, Terraform 등을 통해 CI/CD를 자동화 할 수도 있을 것이다. (너무 어렵다..)</p>\n<p>Jenkins 서버 -> WAS 서버에 jar 복사 과정에서 연결 설정은 22포트를 열어줌으로 해결했다.\n그러나 이런 방식은 보안에 좋지 않다고 생각되는데,</p>\n<ul>\n<li>Jenkins 서버의 보안 문제 == WAS 서버 보안 문제</li>\n<li>복잡도 증가: ssh key 관리, WAS에 Script 파일을 관리</li>\n<li>두 서버 간의 네트워크 연결에 의존하게 됨</li>\n</ul>\n<p>argo CD나 여타 다른 인프라 툴을 공부하고 사용해보며 비교해보면 좋겠다!</p>\n<h4 id=\"문제-1-jar-파일-경로\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-1-jar-%ED%8C%8C%EC%9D%BC-%EA%B2%BD%EB%A1%9C\" aria-label=\"문제 1 jar 파일 경로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 1. Jar 파일 경로</h4>\n<p>Remote directory 경로를 <code class=\"language-text\">/home/ubuntu/best-robbins/jar</code>로 절대경로로 명시했다.\nJar 파일이 복사는 됐지만 실행되지 않았는데, 이유는\n<code class=\"language-text\">/home/ubuntu/home/ubuntu/best-robbins/jar</code> 경로에 복사가 됐기 때문이다.</p>\n<p>원인이 무엇일까?\n확실한건 기본 path가 /home/ubuntu/best-robbins 로 설정되어 있다는 것이다.\n/home/ubuntu 까진 이해가 되지만, 내가 만든 폴더가 기본 path가 된 이유를 잘 모르겠다.\nbashrc, bash_profile, PATH, HOME 등 모든 설정을 확인해봤지만 best-robbins 폴더가 경로로 설정된 경우는 없었다. 물론 Jenkins 설정에서 해당 폴더 경로를 지정한 적도 없고 말이다.</p>\n<p>Publish Over SSH를 사용했기에, 해당 플러그인에 문제가 있을 수도 있지만 WAS 서버의 설정 문제 같은데, 정확한 원인을 밝히지 못했다… 정확한 Logging 통해 문제를 파악해 봐야한다.</p>\n<h4 id=\"문제-2-sudo-java-실행-시-환경변수-문제\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-2-sudo-java-%EC%8B%A4%ED%96%89-%EC%8B%9C-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EB%AC%B8%EC%A0%9C\" aria-label=\"문제 2 sudo java 실행 시 환경변수 문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 2. sudo java 실행 시 환경변수 문제</h4>\n<p>application-dev.yml에 정의한 DATABASE 정보가 있다. PATH, password, username 등을 정의했는데, 보안을 위해 WAS 서버에 환경변수로 등록했다.</p>\n<p>문제는 <code class=\"language-text\">sudo java -Dspring.profiles.active=dev -jar /home/ubuntu/jar/your-jar-file.jar</code>\n와 같이 실행할 때 환경변수가 작동하지 않았다.</p>\n<p><strong>원인</strong> : sudo로 실행하면 환경변수가 다르다!\n전혀 몰랐던 사실인데, sudo -E 옵션을 지정해줘야 설정한 환경변수를 사용할 수 있다. 때문에 환경변수를 포함해 실행하기 위해서는 -E 옵션을 붙여주자.</p>\n<h4 id=\"문제-3-인터렉티브-모드\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-3-%EC%9D%B8%ED%84%B0%EB%A0%89%ED%8B%B0%EB%B8%8C-%EB%AA%A8%EB%93%9C\" aria-label=\"문제 3 인터렉티브 모드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 3. \b인터렉티브 모드</h4>\n<p>Jenkins 서버는 jar 파일을 복사 후, WAS 서버에 존재하는 스크립트 실행을 위해\n<code class=\"language-text\">sh /my/script.sh</code> 명령어를 실행한다. 해당 스크립트는 기존 스프링 서버를 종료하고, 새롭게 jar 파일을 실행한다.\n문제는 환경변수가 또!! 제대로 작동하지 않았다.</p>\n<p><strong>원인</strong> : 콘솔에서 스크립트 실행 시 문제가 없었다. 결국 Jenkins에서의 접근이 문제인데, 내가 지정한 환경변수는 bashrc에 저장되어 있고, 서버가 실행될 때 source ~/.bashrc 가 실행된다.\nbashrc를 뜯어보면 아래와 같은 내용이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># If not running interactively, don't do anything</span>\n<span class=\"token keyword\">case</span> $- <span class=\"token keyword\">in</span>\n    *i*<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n      *<span class=\"token punctuation\">)</span> <span class=\"token builtin class-name\">return</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Jenkins를 통해 접근한 경우 non-interactive mode이다. 때문에 bashrc 자체가 실행되지 않는다.\n때문에</p>\n<ul>\n<li>스크립트 내에서 bashrc를 활성화</li>\n<li>systemd와 같은 서비스 관리 도구를 사용</li>\n<li>script 내에 export 명령어를 저장\n등의 방법으로 해결할 수 있다.</li>\n</ul>\n<p>이런 과정을 통해 CI/CD를 설정했따. 시간이 꽤 지나고 두서없이 적었더니, 정말 끔찍한 글이 됐다.</p>\n<p>빠른 개발을 위해 선택한 방법들이 많아서, 보다 좋은 설계를 가진 CI/CD로 업그레이드 해볼 예정이다!</p>","frontmatter":{"date":"October 05, 2023","title":"Jenkins를 통해 CI/CD를 하던 중..","categories":"Infra","author":"지구깜냥","emoji":"🌱"},"fields":{"slug":"/passion/best-robbins/jenkins/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://ggam-nyang.github.io","comments":{"utterances":{"repo":"ggam-nyang/ggam-nyang.github.io"}}}}},"pageContext":{"slug":"/c++/vsExtension/","nextSlug":"/passion/best-robbins/jenkins/","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}